{"version":3,"sources":["webpack:///webpack/bootstrap 90e79b2d7d9b7f486d23","webpack:///./src/services/http/http.service.ts","webpack:///./src/config/config.ts","webpack:///./src/services/event/event.service.ts","webpack:///./src/app.ts","webpack:///./src/entities/chunk.ts","webpack:///./src/entities/header.ts","webpack:///./src/entities/media.ts","webpack:///./src/entities/request.ts","webpack:///./src/entities/response.ts","webpack:///./src/entities/ticket.ts","webpack:///./src/entities/time_data.ts","webpack:///./src/main.ts","webpack:///./src/routes/routes.ts","webpack:///./src/services/chunk/chunk.service.ts","webpack:///./src/services/media/media.service.ts","webpack:///./src/services/ticket/ticket.service.ts","webpack:///./src/services/timer/timer.service.ts","webpack:///./src/services/upload/upload.service.ts","webpack:///./src/services/validator/validator.service.ts","webpack:///./src/utils/utils.ts"],"names":[],"mappings":"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","file":"vimeo-upload.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 11);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 90e79b2d7d9b7f486d23","import {Request} from \"../../entities/request\";\nimport {Header} from \"../../entities/header\";\nimport {Response} from \"../../entities/response\";\nimport {EventService} from \"../event/event.service\";\nimport {TimerService} from \"../timer/timer.service\";\nimport {TimeData} from \"../../entities/time_data\";\n/**\n * Created by kfaulhaber on 31/03/2017.\n */\n    \n    \nexport class HttpService {\n    constructor(\n        public timerService: TimerService\n    ){}\n    \n    public send<T>(request: Request, emitProgress: boolean = false): Promise<T>{\n        return new Promise((resolve: any, reject: any) => {\n            let xhr = new XMLHttpRequest();\n\n            let timeData = this.timerService.create();\n\n            xhr.open(request.method, request.url, true);\n            request.headers.forEach((header: Header)=> xhr.setRequestHeader(header.title, header.value));\n\n            window.addEventListener(\"uploadaborted\", ()=>{\n                xhr.abort();\n            }, false);\n\n            xhr.onload = () => {\n                let end: Date = new Date();\n                timeData.end = end;\n                timeData.done = true;\n\n                let data = null;\n\n                try{\n                    data = JSON.parse(xhr.response);\n                }catch(e){\n                    data = xhr.response;\n                }\n\n                let response = new Response(\n                    xhr.status,\n                    xhr.statusText,\n                    data\n                );\n\n                switch(true){\n                    case xhr.status >= 200 && xhr.status < 300:\n                        resolve(response);\n                        break;\n                    case xhr.status === 308:\n                        response.range = xhr.getResponseHeader(\"Range\");\n                        resolve(response);\n                        break;\n                    default:\n                        reject(response);\n                }\n            };\n\n            xhr.onerror = () => {\n                reject(new Response(xhr.status, xhr.statusText, xhr.response || null));\n            };\n\n            if(emitProgress){\n                this.timerService.save(timeData);\n                xhr.upload.addEventListener(\"progress\", (data: ProgressEvent) => {\n                    if(data.lengthComputable){\n                        let percent = Math.floor(data.loaded/data.total * 100);\n                        timeData.percent = percent;\n                        timeData.end = new Date();\n                    }\n                });\n            }\n\n            try {\n                xhr.send(request.data);\n            } catch(e){\n                console.error(\"An error occured while sending.\", e);\n            }\n\n        });\n    }\n\n    static CreateRequest(\n        method: string,\n        url: string,\n        data: any = null,\n        headers: any = null\n    ): Request {\n\n        let headerList: Header[] = [];\n        for(let prop in headers){\n            if(headers.hasOwnProperty(prop)){\n                headerList.push(new Header(prop, headers[prop]));\n            }\n        }\n\n        return new Request(method, url, data, headerList)\n    }\n    \n}\n\n\n// WEBPACK FOOTER //\n// ./src/services/http/http.service.ts","/**\n * Created by kfaulhaber on 13/07/2017.\n */\n\nexport const DEFAULT_VALUES = {\n  preferredUploadDuration:  30,\n  chunkSize:                1024*1024,\n  token:                    \"TOKEN_STRING_HERE\",\n  supportedFiles:           [\"mov\", \"mpeg4\", \"mp4\", \"avi\", \"wmv\", \"mpegps\", \"flv\", \"3gpp\", \"webm\"],\n  name:                     \"\",\n  description:              \"\",\n  file:                     null,\n  upgrade_to_1080:          false,\n  timeInterval:             150\n};\n\nexport const DEFAULT_EVENTS = {\n  chunkprogresschanged: (event: CustomEvent)=>console.log(`Default: Chunk Progress Update: ${event.detail}/100`),\n  totalprogresschanged: (event: CustomEvent)=>console.log(`Default: Total Progress Update: ${event.detail}/100`),\n  estimatedtimechanged: (event: CustomEvent)=>console.log(`Default: Estimated Time Update: ${event.detail}`),\n  estimatedchunktimechanged: (event: CustomEvent)=>console.log(`Default: Estimated Chunk Time Update: ${event.detail}`),\n  estimateduploadspeedchanged: (event: CustomEvent)=>console.log(`Default: Estimated Upload Speed Changed: ${event.detail} mb/s`),\n  uploadaborted: (event: CustomEvent)=>console.log(`Default: Upload aborted detected.`)\n};\n\n\n// WEBPACK FOOTER //\n// ./src/config/config.ts","import {DEFAULT_EVENTS} from \"../../config/config\";\n/**\n * Created by kfaulhaber on 17/07/2017.\n */\n\nexport class EventService {\n\n    public static Add(eventName: string, callback: any){\n        window.addEventListener(eventName, callback, false);\n    }\n\n    public static Remove(eventName: string, callback: any){\n        window.removeEventListener(eventName, callback, false);\n    }\n\n    public static Dispatch(eventName: string, data: any = null){\n        let customEvent = new CustomEvent(eventName, {detail: data});\n        window.dispatchEvent(customEvent);\n    }\n\n    public static Exists(eventName: string): boolean{\n        return DEFAULT_EVENTS.hasOwnProperty(eventName);\n    }\n\n    public static GetDefault(eventName: string): any {\n        return DEFAULT_EVENTS[eventName];\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/services/event/event.service.ts","import {TicketService} from \"./services/ticket/ticket.service\";\nimport {ChunkService} from \"./services/chunk/chunk.service\";\nimport {UploadService} from \"./services/upload/upload.service\";\nimport {DEFAULT_VALUES} from \"./config/config\";\nimport {EventService} from \"./services/event/event.service\";\nimport {TimeUtil} from \"./utils/utils\";\nimport {ValidatorService} from \"./services/validator/validator.service\";\nimport {MediaService} from \"./services/media/media.service\";\nimport {Response} from \"./entities/response\";\nimport {TimerService} from \"./services/timer/timer.service\";\nimport {HttpService} from \"./services/http/http.service\";\n/**\n * Created by Grimbode on 12/07/2017.\n */\n\nexport class App {\n    \n    public ticketService: TicketService;\n    public chunkService: ChunkService;\n    public uploadService: UploadService;\n    public validatorService: ValidatorService;\n    public mediaService: MediaService;\n    public timerService: TimerService;\n    public httpService: HttpService;\n\n    constructor(options: any = {}){\n\n        for(let prop in options){\n            if(!options.hasOwnProperty(prop)){\n                continue;\n            }\n            switch(true){\n                case DEFAULT_VALUES.hasOwnProperty(prop):\n                    DEFAULT_VALUES[prop] = options[prop];\n                    break;\n                default:\n                    console.warn(`Unrecognized property: ${prop}`);\n            }\n        }\n        this.timerService = new TimerService(\n            DEFAULT_VALUES.timeInterval,\n            this.chunkService\n        );\n\n        this.httpService = new HttpService(\n            this.timerService\n        );\n\n        this.ticketService = new TicketService(\n            DEFAULT_VALUES.token,\n            this.httpService\n        );\n\n        this.mediaService = new MediaService(\n            DEFAULT_VALUES\n        );\n\n        this.chunkService = new ChunkService(\n            this.mediaService,\n            DEFAULT_VALUES.preferredUploadDuration,\n            DEFAULT_VALUES.chunkSize\n        );\n\n        this.uploadService = new UploadService(\n            this.mediaService,\n            this.ticketService,\n            this.httpService\n        );\n\n        this.validatorService = new ValidatorService(\n            DEFAULT_VALUES.supportedFiles\n        );\n        \n\n\n    }\n    \n    public start(options: any = {}){\n        this.mediaService.setData(options);\n\n        if(options.token){\n            this.ticketService.token = DEFAULT_VALUES.token = options.token;\n        }\n\n        //TODO: Add error if not supported.\n\n        if(!this.validatorService.isSupported(this.mediaService.media.file)) return;\n        this.ticketService.open()\n            .then((response: Response)=>{\n                console.log(response);\n                this.ticketService.save(response);\n                this.timerService.start();\n                this.process();\n            }).catch((error)=>{\n                console.log(`Error occured while generating ticket. ${error}`);\n            });\n    }\n\n    private process(){\n        console.log(\"Processing\");\n        let chunk = this.chunkService.create();\n        console.log(chunk.content, chunk.contentRange);\n        this.uploadService.send(chunk).then((response: Response) => {\n            console.log(`DURATION ${this.timerService.getChunkUploadDuration()}`)\n            this.chunkService.updateSize(this.timerService.getChunkUploadDuration());\n            this.check();\n        }).catch(error=>{\n            console.error(`Error sending chunk`, error);\n        });\n    }\n\n    private check(){\n        this.uploadService.getRange().then((response: Response) => {\n            switch(response.status){\n                case 308:\n                    console.log(`New range ${response.range}`);\n                    this.chunkService.updateOffset(response.range);\n                    EventService.Dispatch(\"totalprogresschanged\", this.chunkService.getPercent());\n\n                    if(this.chunkService.isDone()){\n                        this.done();\n                        return;\n                    }\n\n                    this.process();\n                    break;\n                case 200 || 201:\n                    this.ticketService.close().then((response:any)=>{\n                        console.log(response);\n                    }).catch(error=>{\n                       console.log(error);\n                    });\n                    break;\n                default:\n                    console.warn(`Unrecognized status code (${response.status}) for chunk range.`)\n            }\n        }).catch(error=>{\n            console.error(`Error getting chunk range`, error);\n        })\n    }\n\n    //TODO: find a way to reset\n    public done(){\n        this.ticketService.close().then((response: Response)=>{\n            console.log(`Delete success:`, response);\n        }).catch((error)=>{\n            console.warn(`Delete failed:`, error);\n        });\n    }\n\n    public abort(){\n        EventService.Dispatch(\"uploadaborted\");\n        this.done();\n    }\n    public on(eventName: string, callback: any = null){\n        if(!EventService.Exists(eventName)) return;\n        if(callback === null){\n            callback = EventService.GetDefault(eventName);\n        }\n        EventService.Add(eventName, callback);\n    }\n    \n    public off(eventName: string, callback: any = null){\n        if(!EventService.Exists(eventName)) return;\n        if(callback === null){\n            callback = EventService.GetDefault(eventName);\n        }\n        EventService.Remove(eventName, callback)\n    }\n    \n}\n\n\n// WEBPACK FOOTER //\n// ./src/app.ts","/**\n * Created by kfaulhaber on 13/07/2017.\n */\n\n\nexport class Chunk {\n    constructor(\n        public content: Blob,\n        public contentRange: string\n    ){}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/entities/chunk.ts","/**\n * Created by kfaulhaber on 24/07/2017.\n */\n\nexport class Header {\n    constructor(\n        public title: string,\n        public value: string\n    ){}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/entities/header.ts","/**\n * Created by kfaulhaber on 20/07/2017.\n */\n\nexport class Media {\n\n    //TODO: Check to see if these default values are acceptable\n    constructor(\n        public name: string             = \"\",\n        public description: string      = \"\",\n        public file: File               = null,\n        public upgrade_to_1080: boolean = false\n    ){}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/entities/media.ts","import {Header} from \"./header\";\n/**\n * Created by kfaulhaber on 17/07/2017.\n */\n\n\nexport class Request {\n\n    constructor(\n        public method: string,\n        public url: string,\n        public data: any = null,\n        public headers: Header[] = []\n    ){}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/entities/request.ts","/**\n * Created by kfaulhaber on 20/07/2017.\n */\n\nexport class Response {\n\n    public range: string = null;\n    public duration: number = -1;\n    \n    constructor(\n        public status: number,\n        public statusText: string,\n        public data: any = null\n    ){}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/entities/response.ts","/**\n * Created by kfaulhaber on 13/07/2017.\n */\n\nexport class Ticket {\n    constructor(\n        public uploadLinkSecure: string,\n        public ticketId: string,\n        public uploadLink: string,\n        public completeUri: string,\n        public user: any\n    ){}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/entities/ticket.ts","/**\n * Created by kfaulhaber on 24/07/2017.\n */\n\nexport class TimeData {\n    constructor(\n        public start: Date,\n        public end: Date,\n        public percent: number = 0,\n        public done: boolean = false\n    ){}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/entities/time_data.ts","import {App} from \"./app\";\nvar module;\n/**\n * Created by kfaulhaber on 30/06/2017.\n */\n\nmodule.exports = App;\n\n\n// WEBPACK FOOTER //\n// ./src/main.ts","/**\n * Created by Grimbode on 30/06/2017.\n */\n\nexport const VIMEO_ROUTES = {\n    DEFAULT:            (uri:string = \"\")=>`https://api.vimeo.com${uri}`,\n    TICKET:             ()=>`${VIMEO_ROUTES.DEFAULT()}/me/videos`,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/routes/routes.ts","import {Chunk} from \"../../entities/chunk\";\nimport {MediaService} from \"../media/media.service\";\n/**\n * Created by kfaulhaber on 30/06/2017.\n */\n\nexport class ChunkService {\n\n\n\n    constructor(\n        public mediaService: MediaService,\n        public preferredUploadDuration:number,\n        public size:number,\n        public offset: number = 0\n    ){}\n    \n    public updateSize(uploadDuration: number) {\n\n        console.log(this.size, uploadDuration, this.preferredUploadDuration);\n\n        this.size = Math.floor((this.size*this.preferredUploadDuration)/uploadDuration);\n    }\n    \n    public create(): Chunk{\n        let end = Math.min(this.offset + this.size, this.mediaService.media.file.size);\n        let content = this.mediaService.media.file.slice(this.offset, end);\n\n        return new Chunk(\n            content,\n            `bytes ${this.offset}-${end}/${this.mediaService.media.file.size}`\n        )\n    }\n    \n    public updateOffset(range: string){\n        this.offset = parseInt(range.match(/\\d+/g).pop(), 10) + 1;\n    }\n\n    public getPercent(): number {\n        return Math.floor(this.offset/this.mediaService.media.file.size * 100);\n    }\n\n    public isDone(): boolean {\n        return this.offset >= this.mediaService.media.file.size;\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/services/chunk/chunk.service.ts","import {Media} from \"../../entities/media\";\n/**\n * Created by kfaulhaber on 21/07/2017.\n */\n\nexport class MediaService {\n\n    public media: Media;\n\n    constructor(\n        public options: any\n    ){\n        this.media = new Media();\n        this.setData(options);\n    }\n\n    public setData(options: any){\n        for(let prop in options){\n            if(options.hasOwnProperty(prop) && this.media.hasOwnProperty(prop)){\n                this.media[prop] = options[prop];\n            }\n        }\n\n        if(this.media.file !== null && this.media.name === \"\"){\n            this.media.name = this.media.file.name;\n        }\n\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/services/media/media.service.ts","import {HttpService} from \"../http/http.service\";\nimport {Ticket} from \"../../entities/ticket\";\nimport {Response} from \"../../entities/response\";\nimport {VIMEO_ROUTES} from \"../../routes/routes\";\n/**\n * Created by kfaulhaber on 30/06/2017.\n */\n\nexport class TicketService {\n\n    public ticket:Ticket;\n\n    constructor(\n        public token:     string,\n        public httpService: HttpService\n    ){}\n\n    public open<T>(): Promise<T> {\n        let request = HttpService.CreateRequest(\"POST\", VIMEO_ROUTES.TICKET(), JSON.stringify({ type: 'streaming' }), {\n            Authorization: `Bearer ${this.token}`,\n            'Content-Type': 'application/json'\n        });\n\n        return this.httpService.send(request);\n    }\n\n    public save(response: Response){\n        this.ticket = new Ticket(\n            response.data.upload_link_secure,\n            response.data.ticket_id,\n            response.data.upload_link,\n            response.data.complete_uri,\n            response.data.user\n        );\n    }\n\n    public close<T>(): Promise<T>{\n        let request = HttpService.CreateRequest(\"DELETE\", VIMEO_ROUTES.DEFAULT(this.ticket.completeUri), null, {\n            Authorization: `Bearer ${this.token}`\n        });\n        return this.httpService.send(request)\n    }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/ticket/ticket.service.ts","import {EventService} from \"../event/event.service\";\nimport {TimeUtil} from \"../../utils/utils\";\nimport {ChunkService} from \"../chunk/chunk.service\";\nimport {TimeData} from \"../../entities/time_data\";\n/**\n * Created by Grimbode on 14/07/2017.\n */\n\nexport class TimerService {\n\n    public si: number = -1;\n    public totalTimeData: TimeData;\n    public chunkTimeData: TimeData;\n\n    constructor(\n        public timeInterval: number,\n        public chunkService: ChunkService\n    ){}\n\n    public start(){\n        this.totalTimeData = this.create();\n        this.startInterval();\n    }\n\n    public create(): TimeData {\n        let date = new Date();\n        let timeData = new TimeData(date, date);\n        return timeData;\n    }\n\n    public save(timeData: TimeData){\n        this.chunkTimeData = timeData;\n    }\n\n    public estimateTimeLeft(timeData: TimeData, offset: number = 0): number {\n        let nTime = Math.floor(new Date().getTime() - timeData.start.getTime());\n        let totalEstimatedDuration = Math.floor(nTime*100/timeData.percent);\n        return totalEstimatedDuration - nTime - offset;\n    }\n\n    public startInterval(){\n        if(this.si > -1){\n            clearInterval(this.si);\n        }\n\n        this.si = setInterval(()=>{\n\n            let chunkTimeLeft = (!this.chunkTimeData || this.chunkTimeData.done) ? 0 : this.estimateTimeLeft(this.chunkTimeData);\n            let chunkSecondsLeft = TimeUtil.TimeToSeconds(chunkTimeLeft);\n            let timeLeft = this.estimateTimeLeft(this.totalTimeData, chunkTimeLeft);\n            let secondsLeft = TimeUtil.TimeToSeconds(timeLeft);\n\n            EventService.Dispatch(\"estimatedtimechanged\", {\n                seconds: secondsLeft,\n                timeFormat: TimeUtil.TimeToString(timeLeft)\n            });\n\n            EventService.Dispatch(\"estimatedchunktimechanged\", {\n                seconds: chunkSecondsLeft,\n                timeFormat: TimeUtil.TimeToString(chunkTimeLeft)\n            });\n\n            EventService.Dispatch(\"chunkprogresschanged\", this.chunkTimeData.percent);\n\n            EventService.Dispatch(\"estimateduploadspeedchanged\", this.chunkService.size/chunkSecondsLeft);\n\n        }, this.timeInterval)\n\n    }\n\n\n    public getChunkUploadDuration(): number{\n        return TimeUtil.TimeToSeconds(this.chunkTimeData.end.getTime() - this.chunkTimeData.start.getTime());\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/services/timer/timer.service.ts","import {Chunk} from \"../../entities/chunk\";\nimport {HttpService} from \"../http/http.service\";\nimport {TicketService} from \"../ticket/ticket.service\";\nimport {MediaService} from \"../media/media.service\";\nimport {TimerService} from \"../timer/timer.service\";\n/**\n * Created by kfaulhaber on 30/06/2017.\n */\n\n\nexport class UploadService {\n\n    constructor(\n        public mediaService: MediaService,\n        public ticketService: TicketService,\n        public httpService: HttpService\n    ){}\n\n        public send<T>(chunk: Chunk): Promise<T>{\n            console.log(chunk.content, chunk.contentRange);\n            let request = HttpService.CreateRequest(\"PUT\", this.ticketService.ticket.uploadLinkSecure, chunk.content, {\n                'Content-Type': this.mediaService.media.file.type,\n                'Content-Range': chunk.contentRange\n            });\n            return this.httpService.send(request, true);\n    }\n\n    public getRange<T>(): Promise<T>{\n        let request = HttpService.CreateRequest(\"PUT\", this.ticketService.ticket.uploadLinkSecure, null, {\n            'Content-Type': this.mediaService.media.file.type,\n            'Content-Range': 'bytes */* '\n        });\n        return this.httpService.send(request);\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/services/upload/upload.service.ts","/**\n * Created by kfaulhaber on 30/06/2017.\n */\n\nexport class ValidatorService {\n\n    constructor(\n        public supportedFiles: string[]\n    ){}\n\n    public isSupported(file: File) {\n        let type = file.type;\n\n        if(type.indexOf('/') === -1){\n            console.warn(`Wrong type found (${type}).`);\n            return false;\n        }\n\n        let split = type.split('/');\n\n        if(split[0] !== \"video\"){\n            console.warn(`Only videos are supported, ${type} given.`)\n            return false;\n        }\n\n        return this.supportedFiles.includes(split[1]);\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/services/validator/validator.service.ts","/**\n * Created by kfaulhaber on 17/07/2017.\n */\n\n\nexport class TimeUtil {\n\n    static TimeToSeconds(time: number): number {\n        return time/1000;\n    }\n\n    static TimeToString(time: number): string {\n            let date = new Date(null);\n            date.setTime(time);\n            return date.toISOString().substr(11, 8);\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils/utils.ts"],"sourceRoot":""}